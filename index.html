<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>æˆ‘çš„ä¸ªäººåšå®¢</title>
    <style>
        body { font-family: sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        .header { display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #eee; padding-bottom: 10px; margin-bottom: 20px; }
        .btn { text-decoration: none; padding: 5px 10px; background: #0969da; color: white; border-radius: 5px; cursor: pointer; border: none; font-size: 14px; }
        ul { list-style: none; padding: 0; }
        li { padding: 10px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; }
        a.title { font-size: 18px; text-decoration: none; color: #333; }
        a.title:hover { color: #0969da; }
    </style>
</head>
<body>
    <div class="header">
        <h1>æˆ‘çš„åšå®¢</h1>
        <a href="editor.html" class="btn">âœï¸ å†™æ–‡ç« </a>
    </div>
    <ul id="list">æ­£åœ¨åŠ è½½æ–‡ç« åˆ—è¡¨...</ul>

    <script type="module">
        import { listPosts, downloadFile } from "./js/api.js";
        
        const list = document.getElementById("list");
        const posts = await listPosts();
        
        if (posts.length === 0) {
            list.innerHTML = "è¿˜æ²¡æœ‰æ–‡ç« ï¼Œå¿«å»å†™ä¸€ç¯‡å§ï¼";
        } else {
            list.innerHTML = "";
            posts.forEach(file => {
                if (!file.name.endsWith(".md")) return;
                
                const li = document.createElement("li");
                li.innerHTML = `
                    <a href="post.html?f=${file.name}" class="title">ğŸ“„ ${file.name}</a>
                    <button class="btn" style="background:#666" onclick="download('${file.path}')">â¬‡ï¸ ä¸‹è½½</button>
                `;
                list.appendChild(li);
            });
        }

        // æŠŠä¸‹è½½å‡½æ•°æŒ‚è½½åˆ°å…¨å±€ï¼Œè¿™æ · onclick æ‰èƒ½è°ƒç”¨
        window.download = (path) => downloadFile(path);
    </script>
</body>
</html>
